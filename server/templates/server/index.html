{% extends "base.html" %}
{% load i18n %}
{% load dashboard_extras %}

{% block script %}


{% endblock %}

{% block nav %}
    {% if user.userprofile.level == 'GA' %}
        <li><a href="{% url 'new_business_unit' %}">New Business Unit</a></li>
    {% endif %}
{% endblock %}
{% block content %}
<div class="row">
    <div class="span4">
        <legend>Activity</legend>
        <table class="table table-striped table-condensed table-bordered">
            <tr>
                <td>
                    {% if machine_data.checked_in_this_hour %}<a href="{% url 'overview_list_all' 'activity' '1-hour' %}">{% endif %}
                    Machines this hour
                    <span class="badge badge-info pull-right">
                        {{ machine_data.checked_in_this_hour }}
                    </span>
                    {% if machine_data.checked_in_this_hour %}</a>{% endif %}
                </td>
            </tr>
            <tr>
                <td>{% if machine_data.checked_in_today %}<a href="{% url 'overview_list_all' 'activity' 'today' %}">{% endif %}
                    Machines today
                    <span class="badge badge-info pull-right">
                        {{ machine_data.checked_in_today }}
                    </span>
                    {% if machine_data.checked_in_today %}</a>{% endif %}
                </td>
            </tr>
            <tr>
                <td>{% if machine_data.checked_in_this_week %}<a href="{% url 'overview_list_all' 'activity' '1-week' %}">{% endif %}
                    Machines this week
                    <span class="badge badge-info pull-right">
                        {{ machine_data.checked_in_this_week }}
                    </span>
                    {% if machine_data.checked_in_this_hour %}</a>{% endif %}
                </td>
            </tr>
            <tr>
                <td>{% if machine_data.inactive_for_a_month %}<a href="{% url 'overview_list_all' 'inactivity' '1-month' %}">{% endif %}
                    Inactive for a month
                    <span class="badge badge-warning pull-right">
                        {{ machine_data.inactive_for_a_month }}
                    </span>
                    {% if machine_data.inactive_for_a_month %}</a>{% endif %}
                </td>
            </tr>
            <tr>
                <td>{% if machine_data.inactive_for_three_months %}<a href="{% url 'overview_list_all' 'inactivity' '3-months' %}">{% endif %}
                    Inactive for three months
                    <span class="badge badge-important pull-right">
                        {{ machine_data.inactive_for_three_months }}
                    </span>
                    {% if machine_data.inactive_for_three_months %}</a>{% endif %}
                </td>
            </tr>
        </table>
        
    </div>
    <div class="span4">
        <legend>Status</legend>
        <table class="table table-striped table-condensed table-bordered">
            <tr>
                <td>
                    {% if machine_data.errors %}<a href="{% url 'overview_list_all' 'errors' 'view' %}">{% endif %}
                    Clients with errors
                    <span class="badge badge-important pull-right">
                        {{ machine_data.errors }}
                    </span>
                </td>
            </tr>
            <tr>
                <td>{% if machine_data.warnings %}<a href="{% url 'overview_list_all' 'warnings' 'view' %}">{% endif %}
                    Clients with warnings
                    <span class="badge badge-warning pull-right">
                        {{ machine_data.warnings }}
                    </span>
                    {% if machine_data.warnings %}</a>{% endif %}
                </td>
            </tr>
            <tr>
                <td>{% if machine_data.activity %}<a href="{% url 'overview_list_all' 'active' 'view' %}">{% endif %}
                    Clients with activity
                    <span class="badge badge-info pull-right">
                        {{ machine_data.activity }}
                    </span>
                    {% if machine_data.activity %}</a>{% endif %}
                </td>
            </tr>
        </table>
    </div>
    <div class="span4">
        <legend>Operating System breakdown</legend>
            <table class="table table-striped table-condensed table-bordered">
            {% for item in os_info|dictsort:'operating_system' %}
                <tr>
                    <td>
                        <a href="{% url 'overview_list_all' 'operating_system' item.operating_system %}">
                        {{ item.operating_system }}
                        <span class="badge pull-right">{{ item.count }}</span>
                        </a>
                    </td>
                </tr>
            {% endfor %}
            </table>
    </div>
</div>
<div class="row">
        <div class="span4">
                <legend>Disk Space</legend>
                  <a href="{% url 'overview_list_all' 'disk_space_ok' 'view' %}" class="btn btn-success">
    				<span class="bigger"> {{ machine_data.disk_ok }} </span><br />
    				&lt; 80%
                  </a>
              
                  <a href="{% url 'overview_list_all' 'disk_space_warning' 'view' %}" class="btn btn-warning">
    				<span class="bigger"> {{ machine_data.disk_warning }} </span><br />
    				80% +
                  </a>
              
                  <a href="{% url 'overview_list_all' 'disk_space_alert' 'view' %}" class="btn btn-danger">
    				<span class="bigger"> {{ machine_data.disk_alert }} </span><br />
    				90% +
                  </a>
        </div>
        <div class="span4">
                <legend>Memory</legend>
                  <a href="{% url 'overview_list_all' 'mem_ok' 'view' %}" class="btn btn-success">
    				<span class="bigger"> {{ machine_data.mem_ok }} </span><br />
    				8GB +
                  </a>
              
                  <a href="{% url 'overview_list_all' 'mem_warning' 'view' %}" class="btn btn-warning">
    				<span class="bigger"> {{ machine_data.mem_warning }} </span><br />
    				4GB +
                  </a>
              
                  <a href="{% url 'overview_list_all' 'mem_alert' 'view' %}" class="btn btn-danger">
    				<span class="bigger"> {{ machine_data.mem_alert }} </span><br />
    				&lt; 4GB
                  </a>
        </div>
        <div class="span4">
            <legend>Uptime</legend>
              <a href="{% url 'overview_list_all' 'uptime_ok' 'view' %}" class="btn btn-success">
    			<span class="bigger"> {{ machine_data.uptime_ok }} </span><br />
    			&lt; 1 Day
              </a>
      
              <a href="{% url 'overview_list_all' 'uptime_warning' 'view' %}" class="btn btn-warning">
    			<span class="bigger"> {{ machine_data.uptime_warning }} </span><br />
    			&lt; 7 Days
              </a>
      
              <a href="{% url 'overview_list_all' 'uptime_alert' 'view' %}" class="btn btn-danger">
    			<span class="bigger"> {{ machine_data.uptime_alert }} </span><br />
    			7 Days +
              </a>
    </div>
</div>
<div class="row">
    <div class="span4">
        <legend>Business Units</legend>
        <table class="table table-striped table-condensed table-bordered">
            {% for business_unit in business_units.all %}
            <tr>
                <td><a href="{% url 'bu_dashboard' business_unit.id %}">{{ business_unit.name }}
                    <span class="badge badge-info pull-right">
                        {{ business_unit.id|bu_machine_count }}
                    </span>
                    </a>
                </td>
            </tr>

            {% endfor %}
        </table>
    </div>
</div>
{% endblock %}
